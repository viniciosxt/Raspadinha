<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Raspadinha de Natal - Oficial</title>

    <meta property="og:title" content="RASPADINHA DE NATAL üéÖ">
    <meta property="og:description" content="Raspou, Achou, Ganhou! Ache 3 iguais e ganhe at√© R$ 30.000 no PIX.">
    <meta property="og:image" content="https://image2url.com/images/1764297737948-3a62e1bb-281c-441b-8e0f-57fad9a9b11d.png">
    <meta property="og:url" content="https://raspadinha-nine.vercel.app/">
    <meta property="og:type" content="website">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #008f68;
            --secondary: #004d38;
            --bg: #f4f6f8;
            --text: #333;
            --red: #D32F2F;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--secondary); color: var(--text); line-height: 1.5; }

        /* Header */
        header { background-color: var(--red); padding: 15px; text-align: center; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); position: relative; z-index: 10; }
        .logo-text { font-size: 1.5rem; font-weight: 800; text-transform: uppercase; }
        
        /* Status Bar */
        .status-container { display: flex; gap: 10px; justify-content: center; margin-top: 10px; flex-wrap: wrap; }
        .status-badge { background-color: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; display: flex; align-items: center; gap: 5px; }
        .pulsing { width: 8px; height: 8px; background-color: #00e676; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        /* Main */
        main { background-color: var(--bg); border-top-left-radius: 25px; border-top-right-radius: 25px; min-height: calc(100vh - 100px); padding: 20px; margin-top: -10px; position: relative; z-index: 20; }
        .content-section { display: none; animation: fadeIn 0.5s; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Imagem Destaque */
        .hero-image { width: 100%; height: auto; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: block; }

        /* Elementos Gerais */
        h2 { color: var(--secondary); margin-bottom: 15px; text-align: center; }
        p { text-align: center; margin-bottom: 15px; color: #555; }
        .btn-main { background-color: var(--primary); color: white; width: 100%; padding: 16px; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(0, 143, 104, 0.4); transition: transform 0.2s; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .btn-main:active { transform: scale(0.98); }
        .btn-whatsapp { background-color: #25D366; margin-bottom: 10px; }
        .btn-pix { background-color: #32BCAD; margin-bottom: 15px; }

        /* Quiz */
        .quiz-container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .quiz-option { background: #f0f0f0; padding: 15px; margin-bottom: 10px; border-radius: 10px; cursor: pointer; transition: 0.2s; border: 2px solid transparent; font-weight: 500; display: flex; align-items: center; gap: 10px; }
        .quiz-option:hover { background: #e0e0e0; }
        .option-circle { height: 20px; width: 20px; border: 2px solid #ccc; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .quiz-option.selected .option-circle { border-color: var(--primary); background: var(--primary); }
        .progress-wrapper { height: 10px; background: #ddd; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.5s; }

        /* Raspadinha */
        #scratch-container { position: relative; width: 300px; height: 300px; margin: 0 auto 20px; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        #scratch-canvas { position: absolute; top: 0; left: 0; cursor: grab; z-index: 2; }
        .prize-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #e0e0e0; z-index: 1; }
        .grid-item { background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.9rem; border-radius: 5px; color: #333; }

        /* Share & Pix */
        .share-box { text-align: center; border: 2px dashed #ccc; padding: 15px; border-radius: 10px; margin: 20px 0; }
        .share-progress-bar { width: 0%; height: 10px; background: #25D366; border-radius: 5px; transition: width 0.3s; margin: 10px 0; }
        .divider { display: flex; align-items: center; text-align: center; margin: 20px 0; color: #777; font-size: 0.9rem; }
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #ccc; }
        
        .pix-area { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .pix-key-box { background: #f0f0f0; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 1.1rem; border: 1px solid #ddd; word-break: break-all; margin-bottom: 10px; }
        .copy-feedback { color: var(--primary); font-size: 0.8rem; height: 20px; opacity: 0; transition: opacity 0.3s; }

        /* Form & Overlays */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
        
        .loading-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 50; border-radius: 25px; }
        .spinner { width: 40px; height: 40px; border: 4px solid #ddd; border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: 0.3s; }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-box { background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 400px; text-align: center; }
        .modal-prize { font-size: 2.5rem; color: var(--primary); font-weight: 800; margin: 20px 0; }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <div class="logo-text">üéÖ RASPADINHA</div>
            <p style="font-size: 0.9rem; opacity: 0.9; color: white;">Especial de Natal - Ao Vivo</p>
            <div style="background: rgba(0,0,0,0.2); padding: 5px 15px; border-radius: 20px; font-size: 0.8rem;">
                <span id="winner-ticker">Juliana B. ganhou <strong>R$ 50,00</strong></span>
            </div>
            <div class="status-container">
                <div class="status-badge"><span class="pulsing"></span> Online: <strong id="online-count">789</strong></div>
                <div class="status-badge"><span class="pulsing"></span> Pagos: <strong id="paid-count">R$ 880.458</strong></div>
            </div>
        </div>
    </header>

    <main>
        <section id="intro-section" class="content-section active">
            <img src="https://image2url.com/images/1764297737948-3a62e1bb-281c-441b-8e0f-57fad9a9b11d.png" alt="Natal" class="hero-image">
            <h2>Presente de Natal</h2>
            <p>Responda 3 perguntas simples e ganhe (1) Raspadinha de Natal.</p>
            <div style="text-align: center; margin: 20px 0; padding: 15px; background: #e8f5e9; border-radius: 10px;">
                <p style="margin:0; font-weight: bold; color: var(--secondary);">Liberado at√©:</p>
                <h3 style="font-size: 1.5rem; color: var(--primary);">25/12/2025</h3>
            </div>
            <button onclick="goToSection('quiz-section')" class="btn-main">RESPONDER E GANHAR</button>
        </section>

        <section id="quiz-section" class="content-section">
            <div class="loading-overlay" id="quiz-loading"><div class="spinner"></div><h3>Verificando respostas...</h3><p>Analisando perfil...</p></div>
            <h2>Quiz Premiado</h2>
            <div class="progress-wrapper"><div class="progress-fill" id="quiz-progress"></div></div>
            <div class="quiz-container">
                <div class="question-block" id="q1">
                    <p style="font-weight: bold; font-size: 1.1rem; margin-bottom: 20px;">1. Qual √© o animal que mais paga?</p>
                    <div class="quiz-option" onclick="nextQuestion(1)"><div class="option-circle"></div> Tigrinho üêØ</div>
                    <div class="quiz-option" onclick="nextQuestion(1)"><div class="option-circle"></div> Boizinho üêÆ</div>
                    <div class="quiz-option" onclick="nextQuestion(1)"><div class="option-circle"></div> Lontrinha ü¶¶</div>
                    <div class="quiz-option" onclick="nextQuestion(1)"><div class="option-circle"></div> Topeirinha üêπ</div>
                </div>
                <div class="question-block" id="q2" style="display: none;">
                    <p style="font-weight: bold; font-size: 1.1rem; margin-bottom: 20px;">2. Qual o maior influencer?</p>
                    <div class="quiz-option" onclick="nextQuestion(2)"><div class="option-circle"></div> Buzeira</div>
                    <div class="quiz-option" onclick="nextQuestion(2)"><div class="option-circle"></div> Nino Abravanel</div>
                    <div class="quiz-option" onclick="nextQuestion(2)"><div class="option-circle"></div> Valdo 500 Gols</div>
                    <div class="quiz-option" onclick="nextQuestion(2)"><div class="option-circle"></div> Sr Donato</div>
                </div>
                <div class="question-block" id="q3" style="display: none;">
                    <p style="font-weight: bold; font-size: 1.1rem; margin-bottom: 20px;">3. Confirma que voc√™ √© humano?</p>
                    <div class="quiz-option" onclick="finishQuiz()"><div class="option-circle"></div> Sim, sou humano</div>
                    <div class="quiz-option" onclick="finishQuiz()"><div class="option-circle"></div> Com certeza</div>
                </div>
            </div>
        </section>

        <section id="scratch-section" class="content-section">
            <h2>Raspadinha Liberada!</h2>
            <p>Raspe a √°rea cinza abaixo para revelar.</p>
            <div id="scratch-container">
                <div class="prize-grid" id="prize-grid"></div>
                <canvas id="scratch-canvas"></canvas>
            </div>
            <p style="font-size: 0.8rem; opacity: 0.7;">Encontre 3 valores iguais para ganhar.</p>
        </section>

        <section id="share-section" class="content-section">
            <h2>Parab√©ns! Voc√™ ganhou!</h2>
            <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                <p style="margin:0;">Pr√™mio dispon√≠vel:</p>
                <h1 style="color: var(--primary); font-size: 3rem;">R$ 30.000,00</h1>
            </div>

            <p>Para liberar seu saque PIX, voc√™ tem 2 op√ß√µes:</p>

            <div class="share-box">
                <p style="font-weight: bold; color: var(--secondary);">OP√á√ÉO 1 (Gr√°tis)</p>
                <p style="font-size: 0.9rem;">Compartilhe com 5 amigos no WhatsApp.</p>
                <div style="background: #ddd; height: 10px; border-radius: 5px; overflow: hidden; margin: 10px 0;">
                    <div class="share-progress-bar" id="share-bar"></div>
                </div>
                <p style="font-size: 0.8rem;">Progresso: <span id="share-count">0</span>/5</p>
                <button onclick="shareAction()" class="btn-main btn-whatsapp">üì± COMPARTILHAR</button>
            </div>

            <div class="divider">OU</div>

            <button onclick="goToPixPage()" class="btn-main btn-pix">‚ö° PAGAR TAXA DE LIBERA√á√ÉO (R$ 5,00)</button>
            <button id="btn-claim-prize" class="btn-main" style="background-color: #ccc; cursor: not-allowed; margin-top: 20px;" disabled onclick="goToSection('form-section')">REALIZAR SAQUE AGORA</button>
        </section>

        <section id="pix-section" class="content-section">
            <div class="loading-overlay" id="pix-checking"><div class="spinner"></div><h3>Verificando Pagamento...</h3></div>
            <h2>Pagamento da Taxa</h2>
            <p>Fa√ßa o PIX de <strong>R$ 5,00</strong> para a chave abaixo.</p>
            <div class="pix-area">
                <p style="font-size: 0.9rem; color: #555; margin-bottom: 5px;">Chave PIX:</p>
                <div class="pix-key-box" id="pix-key-text">38998333666</div>
                <div class="copy-feedback" id="copy-msg">Copiado!</div>
                <button onclick="copyPix()" class="btn-main" style="padding: 10px; font-size: 0.9rem; background-color: #555;">üìã COPIAR CHAVE</button>
            </div>
            <button onclick="simulatePixCheck()" class="btn-main btn-pix">J√Å FIZ O PAGAMENTO</button>
            <button onclick="goToSection('share-section')" style="background: none; border: none; color: #777; width: 100%; margin-top: 15px; text-decoration: underline;">Voltar</button>
        </section>

        <section id="form-section" class="content-section">
            <h2>Dados para Recebimento</h2>
            <p>Pr√™mio liberado! Preencha onde quer receber.</p>
            <div class="form-group"><label>Tipo de Chave:</label><select><option>CPF</option><option>Telefone</option></select></div>
            <div class="form-group"><label>Chave PIX:</label><input type="text" placeholder="Sua chave..."></div>
            <div class="form-group"><label>Nome:</label><input type="text" placeholder="Nome completo..."></div>
            <button onclick="finishProcess()" class="btn-main">CONFIRMAR SAQUE</button>
        </section>

        <section id="final-section" class="content-section" style="text-align: center;">
            <div style="font-size: 4rem;">‚úÖ</div>
            <h2>Solicita√ß√£o Enviada!</h2>
            <p>Obrigado por participar.</p>
        </section>

    </main>

    <div id="prize-modal" class="modal-overlay">
        <div class="modal-box">
            <h3>VOC√ä ACHOU!</h3>
            <div class="modal-prize">R$ 30.000</div>
            <p>Voc√™ encontrou o pr√™mio m√°ximo!</p>
            <button class="btn-main" onclick="closeModalAndGo()">RESGATAR</button>
        </div>
    </div>

    <script>
        // CONFIG
        function goToSection(id) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'scratch-section') initScratchCard();
        }

        // QUIZ
        function nextQuestion(cur) {
            document.getElementById('quiz-progress').style.width = ((cur/3)*100)+'%';
            setTimeout(() => { document.getElementById('q'+cur).style.display='none'; document.getElementById('q'+(cur+1)).style.display='block'; }, 250);
        }
        function finishQuiz() {
            document.getElementById('quiz-progress').style.width='100%';
            document.getElementById('quiz-loading').style.display='flex';
            setTimeout(() => { document.getElementById('quiz-loading').style.display='none'; goToSection('scratch-section'); }, 2000);
        }

        // RASPADINHA
        function initScratchCard() {
            const c = document.getElementById('scratch-canvas');
            const ctx = c.getContext('2d');
            c.width = 300; c.height = 300;
            // Premios: R$ 30.000 (3x para ganhar)
            document.getElementById('prize-grid').innerHTML = `
                <div class="grid-item">R$ 10</div><div class="grid-item">R$ 30.000</div><div class="grid-item">R$ 5</div>
                <div class="grid-item">R$ 30.000</div><div class="grid-item">R$ 50</div><div class="grid-item">R$ 30.000</div>
                <div class="grid-item">R$ 2</div><div class="grid-item">R$ 20</div><div class="grid-item">R$ 10</div>
            `;
            ctx.fillStyle = '#C0C0C0'; ctx.fillRect(0,0,300,300);
            ctx.fillStyle = '#666'; ctx.font="bold 24px Arial"; ctx.textAlign="center"; ctx.fillText("RASPE AQUI", 150, 150);
            
            let isD=false, rev=false;
            const scratch = (x,y) => {
                ctx.globalCompositeOperation='destination-out'; ctx.beginPath(); ctx.arc(x,y,25,0,Math.PI*2); ctx.fill();
                let p=0, data=ctx.getImageData(0,0,300,300).data;
                for(let i=3; i<data.length; i+=4) if(data[i]===0) p++;
                if(p>(300*300)*0.4 && !rev) { rev=true; setTimeout(showWin, 500); }
            };
            const getPos = (e) => {
                const r = c.getBoundingClientRect();
                const cx = e.touches ? e.touches[0].clientX : e.clientX;
                const cy = e.touches ? e.touches[0].clientY : e.clientY;
                return {x:cx-r.left, y:cy-r.top};
            };
            ['mousedown','touchstart'].forEach(e=>c.addEventListener(e,()=>isD=true));
            ['mouseup','touchend'].forEach(e=>c.addEventListener(e,()=>isD=false));
            ['mousemove','touchmove'].forEach(e=>c.addEventListener(e,(evt)=>{if(isD){evt.preventDefault(); const p=getPos(evt); scratch(p.x,p.y)}}));
        }

        function showWin() {
            try{new Howl({src:['https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-click-1107.mp3']}).play()}catch(e){}
            try{confetti({particleCount:100,spread:70,origin:{y:0.6}})}catch(e){}
            document.getElementById('prize-modal').classList.add('visible');
        }
        function closeModalAndGo() { document.getElementById('prize-modal').classList.remove('visible'); goToSection('share-section'); }

        // --- COMPARTILHAMENTO (MENSAGEM WHATSAPP) ---
        let shareCount = 0;
        function shareAction() {
            shareCount++;
            
            // Pega a hora atual do dispositivo da pessoa
            const now = new Date();
            const hora = now.getHours().toString().padStart(2, '0');
            const min = now.getMinutes().toString().padStart(2, '0');
            const seg = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hora}:${min}:${seg}`;

            // Texto atualizado conforme pedido
            const msg = `*RASPADINHA DE NATAL* üéÖ\n\n*Raspou, Achou Ganhou seu presente*\n\nAche 3 iguais e ganhe na hora at√© *R$30.000,00* no seu PIX\n\n*Raspe gr√°tis at√©: 25/12*\nhttps://raspadinha-nine.vercel.app/\n\nO meu saque caiu √°s ${timeString}`;
            
            window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`, '_blank');
            
            // Atualiza barra
            document.getElementById('share-bar').style.width = ((shareCount/5)*100)+'%';
            document.getElementById('share-count').innerText = shareCount;
            if(shareCount >= 5) {
                const b = document.getElementById('btn-claim-prize');
                b.disabled=false; b.style.backgroundColor='#008f68'; b.style.cursor='pointer';
            }
        }

        // PIX
        function goToPixPage(){ goToSection('pix-section'); }
        function copyPix(){ 
            navigator.clipboard.writeText(document.getElementById('pix-key-text').innerText);
            const m=document.getElementById('copy-msg'); m.style.opacity=1; setTimeout(()=>m.style.opacity=0,2000);
        }
        function simulatePixCheck(){ 
            document.getElementById('pix-checking').style.display='flex';
            setTimeout(()=>{ document.getElementById('pix-checking').style.display='none'; goToSection('share-section'); alert('Pago! Saque liberado.'); 
            const b = document.getElementById('btn-claim-prize'); b.disabled=false; b.style.backgroundColor='#008f68'; b.style.cursor='pointer';
            }, 3000); 
        }
        function finishProcess(){ 
            document.querySelector('#form-section .btn-main').innerHTML='Enviando...';
            setTimeout(()=>goToSection('final-section'),1500);
        }

        // TICKER
        setInterval(()=>{ 
            const el=document.getElementById('online-count'); 
            el.innerText = parseInt(el.innerText) + (Math.random()>0.5?1:-1); 
        }, 3000);
    </script>
</body>
</html>
